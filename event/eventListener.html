<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .outer,
    .middle,
    .inner1,
    .inner2 {
      display: block;
      width: 520px;
      padding: 15px;
      margin: 15px;
      text-decoration: none;
    }

    .outer {
      border: 1px solid red;
      color: red;
    }

    .middle {
      border: 1px solid green;
      color: green;
      width: 460px;
    }

    .inner1,
    .inner2 {
      border: 1px solid purple;
      color: purple;
      width: 400px;
    }
  </style>
</head>

<body>
  <h3>事件处理器----options用法示例</h3>
  <h3 id='time'>2021年02月26日16:35:16</h3>
  <div class="outer">
    outer, once & none-once
    <div class="middle" target="_blank">
      middle, capture & none-capture
      <a class="inner1" href="javascript:;">
        inner1, passive & preventDefault(which is not allowed)
      </a>
      <a class="inner2" href="www.baidu.com" target="_blank">
        inner2, none-passive & preventDefault(not open new page)
      </a>
    </div>
  </div>
  <script>
    let outer = document.getElementsByClassName('outer')[0];
    let middle = document.getElementsByClassName('middle')[0];
    let inner1 = document.getElementsByClassName('inner1')[0];
    let inner2 = document.getElementsByClassName('inner2')[0];

    let capture = {
      capture: true
    };
    let noneCapture = {
      capture: false
    };
    let once = {
      once: true
    };
    let noneOnce = {
      once: false
    };
    let passive = {
      passive: true
    };
    let nonePassive = {
      passive: false
    };

    outer.addEventListener('click', onceHandler, once);
    outer.addEventListener('click', noneOnceHandler, noneOnce);
    middle.addEventListener('click', captureHandler, capture);
    middle.addEventListener('click', noneCaptureHandler, noneCapture);
    inner1.addEventListener('click', passiveHandler, passive);
    inner2.addEventListener('click', nonePassiveHandler, nonePassive);
    
    function onceHandler(event) {
      console.log('outer, once');
    }
    function noneOnceHandler(event) {
      console.log('outer, none-once, default');
    }
    function captureHandler(event) {
      //event.stopImmediatePropagation();
      console.log('middle, capture');
    }
    function noneCaptureHandler(event) {
      console.log('middle, none-capture, default');
    }
    function passiveHandler(event) {
      // Unable to preventDefault inside passive event listener invocation.
      //在调用passive事件监听器内部不能使用preventDefault
      // event.preventDefault();
      console.log('inner1, passive, open new page');
    }
    
    function nonePassiveHandler(event) {
      event.preventDefault();
      event.stopPropagation();
      console.log('inner2, none-passive, default, not open new page');
    }
  </script>
</body>

</html>